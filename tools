-- LocalScript (ONLY SimpleSpy + Dark Dex, no remotes)

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

-- ===== UI =====
local gui = Instance.new("ScreenGui")
gui.Name = "DexSpyUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.fromScale(0.25, 0.18)
frame.Position = UDim2.fromScale(0.375, 0.4)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,16)

local layout = Instance.new("UIListLayout", frame)
layout.Padding = UDim.new(0,10)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Center

local padding = Instance.new("UIPadding", frame)
padding.PaddingTop = UDim.new(0,12)
padding.PaddingBottom = UDim.new(0,12)

-- ===== Draggable helper =====
local function makeDraggable(guiObject)
	local dragging = false
	local dragStart, startPos

	guiObject.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = guiObject.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			guiObject.Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		end
	end)
end

-- ===== Button helper =====
local function makeButton(text, callback)
	local b = Instance.new("TextButton")
	b.Size = UDim2.fromScale(0.9, 0.4)
	b.Text = text
	b.TextScaled = true
	b.BackgroundColor3 = Color3.fromRGB(45,45,45)
	b.TextColor3 = Color3.new(1,1,1)
	b.Parent = frame
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,12)
	b.MouseButton1Click:Connect(callback)
	return b
end

-- ===== Buttons =====
local simpleSpyBtn = makeButton("SimpleSpy", function()
	loadstring(game:HttpGetAsync(
		"https://raw.githubusercontent.com/78n/SimpleSpy/main/SimpleSpyBeta.lua"
	))()
end)

local darkDexBtn = makeButton("Dark Dex", function()
	loadstring(game:HttpGet(
		"https://raw.githubusercontent.com/peyton2465/Dex/master/out.lua"
	))()
end)

-- Frame is draggable
makeDraggable(frame)
