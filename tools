-- LocalScript

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

-- ================= UI =================
local gui = Instance.new("ScreenGui")
gui.Name = "ActionUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.fromScale(0.35, 0.6)
frame.Position = UDim2.fromScale(0.325, 0.2)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,16)

local layout = Instance.new("UIListLayout", frame)
layout.Padding = UDim.new(0,8)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local padding = Instance.new("UIPadding", frame)
padding.PaddingTop = UDim.new(0,12)
padding.PaddingBottom = UDim.new(0,12)

-- ================= Helpers =================
local function makeButton(text, callback)
	local b = Instance.new("TextButton")
	b.Size = UDim2.fromScale(0.9, 0.08)
	b.Text = text
	b.TextScaled = true
	b.BackgroundColor3 = Color3.fromRGB(45,45,45)
	b.TextColor3 = Color3.new(1,1,1)
	b.Parent = frame
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,12)
	b.MouseButton1Click:Connect(callback)
	return b
end

local function makeDraggable(guiObject)
	local dragging = false
	local dragStart, startPos

	guiObject.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = guiObject.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			guiObject.Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		end
	end)
end

-- ================= Loop =================
local looping = false
task.spawn(function()
	while true do
		if looping then
			remote:FireServer("SummonAnomaly")
		end
		task.wait(1)
	end
end)

-- ================= Buttons =================
local simpleSpyBtn = makeButton("SimpleSpy", function()
	loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/78n/SimpleSpy/main/SimpleSpyBeta.lua"))()
end)

local darkDexBtn = makeButton("Dark Dex", function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/peyton2465/Dex/master/out.lua"))()
end)


-- ONLY these two are draggable
makeDraggable(simpleSpyBtn)
makeDraggable(darkDexBtn)
